<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1">
    <title>网络直播</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="textml; charset=utf-8" http-equiv="Content-Type">
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <link rel="stylesheet" type="text/css" href="css/live.css">
    <link rel="stylesheet" type="text/css" href="css/dialog.css"/>
    <link rel="stylesheet" type="text/css" href="css/table_form.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery.mCustomScrollbar.css">
    <script type="text/javascript" src="js/jquery-1.5.1.js"></script>
    <script type="text/javascript" src="js/dialog.js"></script>
    <script type="text/javascript" src="js/cookie.js"></script>
    <script type="text/javascript" src="js/jbase64.js"></script>
    <script type="text/javascript" src="js/jquery.mCustomScrollbar.js"></script>
    <script type="text/javascript" src="js/common.js"></script>
    <script type="text/javascript" src="../ckplayer/ckplayer.js"></script>
    <script type="text/javascript" src="../ckplayer/js/offlights.js"></script>
    <script type="text/javascript" src="../ckplayer/js/barrage.js"></script>
    <script type="text/javascript" src="../ckplayer/js/player.js"></script>

    <style type="text/css">
        .open-right_list a:hover {
            background: #216691 none repeat scroll 0 0;
        }
        .open-right_list a {
            background: #194e6e none repeat scroll 0 0;
            color: #28aae6;
            display: block;
            height: 256px;
            padding-top: 200px;
            text-align: center;
            width: 20px;
        }
        .open-right_list{
            width: 20px;
            height: 456px;
            float: left;
            background: #216691 none repeat scroll 0 0
        }
    </style>

    <script type="text/javascript">
        $.getUrlParam = function(name)
        {
            var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r!=null) return unescape(r[2]); return null;
        }
        var liveId = $.getUrlParam("id");
        //var playUrl = $.getUrlParam("url");
        var beforeAppName = $.getUrlParam("appName");
        var beforeLiveName = $.getUrlParam("liveName");
        var beforeRtmpPort = $.getUrlParam("rtmpPort");
        var beforeLiveStatus = $.getUrlParam("liveStatus");
        var beforeRight = $.getUrlParam("rightLive");

        var host = window.location.hostname;
        var port = window.location.port;
        var player;
        $(function(){
            $("#headHtml").load("header.html");
            $("#bottomHtml").load("bottom.html");

            $.ajax({
                type: "GET",
                async: false,
                url: locationHref + "/rest/client/lives",//获取直播频道
                success:function(data, textStatus, request)
                {
                    var obj = data;
                    if (obj == null) {
                        window.top.art.dialog({id: "show", content: "无频道信息!", time: 1});
                    }
                    var playUrl = null;
                    for (var i = 0; i < obj.length; i++)
                    {
                        var appName = obj[i].appName;
                        var liveName = obj[i].name;
                        var rtmpPort = obj[i].rtmpPort;
                        var liveStatus = obj[i].liveStatus;
                        var right = obj[i].right;
                        if(liveId == null && i==0)
                        {
                            liveId = obj[i].id;
                        }
                        if(playUrl == null && i == 0)
                        {
                            if(beforeAppName == null && beforeLiveName == null && beforeRight == null)
                            {
                                beforeAppName = appName;
                                beforeLiveName = liveName;
                                beforeRtmpPort = rtmpPort;
                                beforeLiveStatus = liveStatus;
                                beforeRight = right;
                            }
                        }
                    }

                    playUrl = "rtmp://"+host+":"+beforeRtmpPort+"/"+beforeAppName+'/'+beforeLiveName;
                    init_live(playUrl,beforeLiveStatus,beforeRight);
                    init_tshift();
                },
                error:function()
                {
                    //top.location.href = "/login.html";
                }
            })

            $(".subNav").click(function(){
                var dom_id = $(this).attr("id");
                dom_id = parseInt(dom_id.substring(dom_id.lastIndexOf("_")+1,dom_id.length));
                var myDate = new Date();
                var year =  myDate.getFullYear(); //获取完整的年份(4位,1970-????)
                var month = myDate.getMonth()+1;      //获取当前月份(0-11,0代表1月)
                var date = myDate.getDate();      //获取当前日(1-31)
                var week = myDate.getDay();        //获取当前星期X(0-6,0代表星期天)
                if(week == 0)
                {
                    week = 7;
                }

                if(dom_id > week)
                {
                    var week_num = 7-(dom_id-week);
                    myDate.setDate(myDate.getDate()-week_num);
                    date = myDate.getDate();
                }
                else if(week > dom_id)
                {
                    myDate.setDate(myDate.getDate()-(week-dom_id));
                    date = myDate.getDate();
                }

                var startTime = year+"-"+month+"-"+date+" 00:00:00";
                var endTime = year+"-"+month+"-"+date+" 23:59:59";

                $(this).toggleClass("currentDd").siblings(".subNav").removeClass("currentDd")
                $(this).toggleClass("currentDt").siblings(".subNav").removeClass("currentDt")

                var dom_id = $(this).next(".navContent").attr("id");

                var dom_size = $("#"+dom_id).find("li").size();
                if(dom_size <=0)
                {
                    init_record_list(dom_id,startTime,endTime);
                }

                // 修改数字控制速度， slideUp(500)控制卷起速度
                $(this).next(".navContent").slideToggle(500).siblings(".navContent").slideUp(500);
            })

            for(var i= 1;i<=7;i++)
            {
                add_week_dom("media_"+i,i);
            }

            back_week_dom();
        })


        function back_week_dom()
        {
            var myDate = new Date();
            var year =  myDate.getFullYear(); //获取完整的年份(4位,1970-????)
            var month = myDate.getMonth()+1;      //获取当前月份(0-11,0代表1月)
            var date = myDate.getDate();      //获取当前日(1-31)
            var week = myDate.getDay();        //获取当前星期X(0-6,0代表星期天)
            if(week == 0)
            {
                week = 7;
            }
            for(var i= 0;i<7;i++)
            {
                var backNewDate = new Date();
                backNewDate.setDate(myDate.getDate()-i);
                var backYear =  backNewDate.getFullYear(); //获取完整的年份(4位,1970-????)
                var backMonth = backNewDate.getMonth()+1;
                var backDate = backNewDate.getDate();
                var backWeek = backNewDate.getDay();
                var startTime = backYear+"-"+backMonth+"-"+backDate+" 00:00:00";
                var endTime = backYear+"-"+backMonth+"-"+backDate+" 23:59:59";
                if(backWeek == 0)
                {
                    backWeek = 7;
                }
                var week_str = "";
                var dom = '';
                if(i==0)
                {
                    dom+= '<div class="edfwi dfwhover" onclick="edfwitableChange(\''+backWeek+'\',this,\''+backDate+'\')" starTime="'+startTime+'" endTime="'+endTime+'">';
                    init_back_list(backWeek,startTime,endTime,backDate);
                }
                else
                {
                    dom+= '<div class="edfwi" onclick="edfwitableChange(\''+backWeek+'\',this,\''+backDate+'\')" starTime="'+startTime+'" endTime="'+endTime+'">';
                }
                if(backWeek==1)
                {
                    week_str = "周一";
                }
                else if(backWeek==2)
                {
                    week_str = "周二";
                }
                else if(backWeek==3)
                {
                    week_str = "周三";
                }
                else if(backWeek==4)
                {
                    week_str = "周四";
                }
                else if(backWeek==5)
                {
                    week_str = "周五";
                }
                else if(backWeek==6)
                {
                    week_str = "周六";
                }
                else
                {
                    week_str = "周日";
                }
                dom+='<div class="dfw">'+week_str+'</div>'; //周三
                dom+='<div class="dfm">'+backDate+'</div>';
                dom+='</div>';
                $("#back_week").prepend(dom);

                if(week == backWeek)
                {

                    $("#edfwitable"+week).show();
                }
            }
        }

        function init_live(playUrl,beforeLiveStatus,beforeRight)
        {
            $.ajax({
                type: "GET",
                url: locationHref+"/rest/client/lives",//获取直播频道
                success:function(data, textStatus, request)
                {
                    if(data != null)
                    {
                        for(var i = 0; i < data.length; i++)
                        {
                            var appName = data[i].appName;
                            var liveName = data[i].name;
                            var liveStatus = data[i].liveStatus;

                            var url = "rtmp://"+host+":"+beforeRtmpPort+"/"+appName+"/"+liveName;

                            //alert(playUrl)
                            if(beforeAppName == null && beforeLiveName == null)
                            {
                                if(playUrl == null && i == 0)
                                {
                                    playUrl = url;
                                }
                            }

                            var dom = "";
                            var class_style = "live-channel";
                            var right = data[i].right;;
                            if((liveId == null && i == 0) || (liveId  != null && liveId == data[i].id))
                            {
                                class_style = "live-channel live-channel-hover";
                                $("#live_name").html(appName+"/"+liveName);
                                $("#live_title").html(appName+"/"+liveName);
                                $("#live_title1").html(appName+"/"+liveName);
                                beforeAppName = appName;
                                beforeLiveName = liveName;
                                if(right == 3)
                                {
                                    $("[name='playLive']").each(function(){
                                        $(this).hide();
                                    })
                                    $("[name='backLive']").each(function(){
                                        $(this).show();
                                    })
                                }
                                else
                                {
                                    $("[name='playLive']").each(function(){
                                        $(this).show();
                                    })
                                    $("[name='backLive']").each(function(){
                                        $(this).hide();
                                    })
                                    if(right == 1)
                                    {
                                        $("#tshifList").show();
                                    }
                                    else
                                    {
                                        $("#tshifList").hide();
                                    }

                                }
                            }

                            dom+= '<div class="'+class_style+'">';
                            dom+= '<a href="live.html?appName='+appName+'&id='+data[i].id+'&liveName='+liveName+'&rtmpPort='+beforeRtmpPort+'&liveStatus='+liveStatus+'&rightLive='+right+'">'+data[i].alias+'</a>';
                            dom+= '</div>';

                            $("#liveList").append(dom);
                        }
                    }

                     var flashvars = get_flash_var(playUrl, "", "", "", "",
                     "", "", "", "", "",
                     "", "",3);

                    if(beforeRight == 5 || beforeRight == 4)
                    {
                        beforeRight = 1;
                    }
                     flashvars.lv = beforeRight;

                     playerId = "swfContent";
                     var params = {bgcolor : '#FFF',	allowFullScreen : true,	allowScriptAccess : 'always'};//这里定义播放器的其它参数如背景色（跟flashvars中的b不同），是否支持全屏，是否支持交互
                     var video = [""];
                    if(beforeLiveStatus == true || beforeLiveStatus == "true")
                    {
                        CKobject.embed('../ckplayer/ckplayer.swf', playerId, 'swfContent_obj', '100%',	'100%', false, flashvars, video, params);
                        //player = embed_live_player(playUrl,"","","",null,"","","","","","",false,true);
                    }
                    else
                    {
                        var imgDom = "<img src='images/nolivebg.jpg' width='100%' height='100%'/>";
                        $("#swfContent").html(imgDom);
                    }


                    if (window.navigator.userAgent.indexOf("IE 6") == -1) {
                        $(function() {
                            $("#liveList").mCustomScrollbar( {
                                scrollButtons : {
                                    enable : true
                                }
                            });

                            $("#liveList").mCustomScrollbar("scrollTo",
                                    ".EpisodeItem_Hover");
                        })
                    }
                },
                error:function()
                {
                     var flashvars = get_flash_var(playUrl, "", "", "", "",
                     "", "", "", "", "",
                     "", "",3);

                     flashvars.lv = "1";

                     playerId = "swfContent";
                     var params = {bgcolor : '#FFF',	allowFullScreen : true,	allowScriptAccess : 'always'};//这里定义播放器的其它参数如背景色（跟flashvars中的b不同），是否支持全屏，是否支持交互
                     var video = [""];
                     CKobject.embed('../ckplayer/ckplayer.swf', playerId, 'swfContent_obj', '100%',	'100%', false, flashvars, video, params);
                    //player = embed_live_player(playUrl,"","","",null,"","","","","","",false,true);
                }
            })
        }


        //在一个字符串中截取前面部分文字，汉字、全角符号按2个占位，数字英文、半角按一个占位，未显示完的最后加入“……”。
        //适合多行显示。
        function suolve(str, sub_length) {
            // var  = 80 ;
            if (str == "" || str == null)
                return "";
            var temp1 = str.replace(/[^\x00-\xff]/g, "**"); //精髓
            var temp2 = temp1.substring(0, sub_length);
            //找出有多少个*
            var x_length = temp2.split("\*").length - 1;
            var hanzi_num = x_length / 2;
            sub_length = sub_length - hanzi_num; //实际需要sub的长度是总长度-汉字长度
            var res = str.substring(0, sub_length);
            if (sub_length < str.length) {
                var end = res + "…";
            } else {
                var end = res;
            }
            return end;
        }

        function show_addr(id)
        {
            $("#"+id).show();
        }

        function close_addr(id)
        {
            $("#"+id).hide();
        }

        function init_tshift()
        {
            $.ajax({
                type:"GET",
                url:locationHref+"/rest/client/lives/"+liveId+"/programParade",//获取一个直播频道预告
                success: function (data)
                {
                    var obj = data;
                    if(obj != null)
                    {
                        var dom="";
                        for(var i=0;i<obj.length;i++)
                        {
                            var id = obj[i].id;
                            var name = obj[i].name;
                            var getTime = obj[i].time;
                            var liveStatus = obj[i].liveStatus;
                            var description =  obj[i].description;
                            var description_str = suolve(description, 20);
                            var liveStatus_str;
                            if(liveStatus == undefined || liveStatus == false)
                            {
                                liveStatus_str = '<span style="display: inline;float:right;color: red;">未直播</span>';
                            }
                            else
                            {
                                liveStatus_str = '<span style="display: inline;float:right;color: green;">正在直播</span>';

                            }
                            var startTime = getTime.substr(0,getTime.indexOf("_"));
                            var endTime = getTime.substr(getTime.indexOf("_")+1,getTime.length);
                            $("#startTime").val(startTime);
                            $("#endTime").val(endTime);
                            $("#name").val(name);

                            dom += '<div class="tshiftContent">';
                            dom += '<div name="videoName" title="'+name+'" style="overflow: hidden"><span style="display: inline;">'+name+'</span>';
                            dom += ''+liveStatus_str+'</div>';
                            dom += '<div name="videoTime" title="'+startTime+'" style="overflow: hidden">开始时间:'+startTime+'</div>';
                            dom += '<div name="videoTime" title="'+endTime+'" style="overflow: hidden">结束时间:'+endTime+'</div>';
                            dom += '</div>';
                            dom += '<div style="height:30Px;"><span style="color:white;padding-left:10px;" title="'+description+'" onmouseover="show_addr(\'fw_oper_'+id+'\')" onmouseout="close_addr(\'fw_oper_'+id+'\')" >描述:'+description_str+'</span></div>';
                            dom+='<div id="fw_oper_'+id+'"  style="position: relative;top:0px;border: 1px solid #000;display: none;color: white;padding-left:10px;">'+description+'</div>';
                        }
                        $("#tshiftList").append(dom);
                    }
                },
                error:function(data)
                {
                    var errorObj = data;
                    var status = data.status;
                    var statusText = data.statusText
                    if(status == 401 || status == 400)
                    {
                        top.location.href = "login.html";
                    }
                }
            })
        }

        function init_record_list(dom_id,startTime,endTime)  //普通直播录像列表数据
        {
//            startTime = "2017-11-02 00:00:00";
//            endTime =  "2017-11-02 23:59:59";
            $.ajax({
                type: "GET",
                url: locationHref+"/rest/client/recordTypes/"+beforeAppName+"/"+beforeLiveName+"/500/1/"+startTime+"/"+endTime+"/search",
                success:function(data, textStatus, request)
                {
                    if(data != null)
                    {
                        var obj = data.items;
                        if(obj != null)
                        {
                            for(var i=0;i<obj.length;i++)
                            {
                                var name = obj[i].name;
                                if(name != null)
                                {
                                    name = name.substring(name.lastIndexOf("/")+1,name.length);
                                }

                                var dom = '<li style="background-color: rgb(17, 17, 17); color: rgb(102, 102, 102);" onclick="playvideo(\''+obj[i].httpUrl+'\')">'+name+'</li>';
                                $("#"+dom_id).append(dom);
                            }
                        }
                    }
                },
                error:function()
                {

                }
            })
        }

        function init_back_list(id,startTime,endTime,currentDay) //加载回播列表
        {
//            startTime = "2017-11-03 00:00:00";
//            endTime =  "2017-11-03 23:59:59";
//            var beforeAppName = "live";
//            var beforeLiveName = "live2";
            $.ajax({
                type: "GET",
                url: locationHref+"/rest/client/recordTypes/"+beforeAppName+"/"+beforeLiveName+"/500/1/"+startTime+"/"+endTime+"/search",
                success:function(data, textStatus, request)
                {
                    if(data != null)
                    {
                        var obj = data.items;
                        if(obj != null)
                        {
                            for(var i=0;i<obj.length;i++)
                            {
                                var name = obj[i].name;
                                var status = obj[i].status;
                                if(name != null)
                                {
                                    name = name.substring(name.lastIndexOf("/")+1,name.length);
                                    if(name.indexOf(".") != -1)
                                    {
                                        name =  name.substring(0,name.lastIndexOf("."));
                                    }
                                }

                                var live_url = "rtmp://"+location.hostname+":"+beforeRtmpPort+"/"+beforeAppName+"/"+beforeLiveName;
                                var dom = '';
                                if(beforeLiveStatus == "true")
                                {
                                    if(i==obj.length-1)
                                    {
                                        if(currentDay == new Date().getDate())
                                        {
                                            dom+= '<tr onclick="playvideo(\''+live_url+'\')" name="backLiveTr"  style="font-size:12px;cursor:pointer;" class="">'; //playing
                                            dom+= '<td class="playingicon" style="width:80px;text-align:center">'+name+':00</td>';
                                            dom+= '<td style="width:40px">直播</td>';
                                            dom+= '<td>正在直播</td>';
                                        }
                                        else
                                        {
                                            dom+= '<tr onclick="playvideo(\''+obj[i].httpUrl+'\')" name="backLiveTr"  style="font-size:12px;cursor:pointer;" class="">'; //playing
                                            dom+= '<td class="playingicon" style="width:80px;text-align:center">'+name+':00</td>';
                                            dom+= '<td style="width:40px">回播</td>';
                                            dom+= '<td>精彩回播</td>';
                                        }
                                    }
                                    else
                                    {
                                        dom+= '<tr onclick="playvideo(\''+obj[i].httpUrl+'\')" name="backLiveTr"  style="font-size:12px;cursor:pointer;" class="">'; //playing
                                        dom+= '<td class="playingicon" style="width:80px;text-align:center">'+name+':00</td>';
                                        dom+= '<td style="width:40px">回播</td>';
                                        dom+= '<td>精彩回播</td>';
                                    }
                                }
                                else
                                {
                                    dom+= '<tr onclick="playvideo(\''+obj[i].httpUrl+'\')" name="backLiveTr"  style="font-size:12px;cursor:pointer;" class="">'; //playing
                                    dom+= '<td class="playingicon" style="width:80px;text-align:center">'+name+':00</td>';
                                    dom+= '<td style="width:40px">回播</td>';
                                    dom+= '<td>精彩回播</td>';
                                }


                                dom+= '</tr>';
                                if(status != 5)
                                {
                                    $("#edfwitable_tr"+id).append(dom);
                                }
                            }

                            $("[name='backLiveTr']").click(function(){
                                $("[name='backLiveTr']").each(function(){
                                    $(this).removeClass("playing");
                                })
                                $(this).addClass("playing");
                            })
                        }
                    }
                },
                error:function()
                {

                }
            })
        }

        function playvideo(playUrl)
        {
            //playUrl = "http://192.168.2.56:9001/data//live/live1/2017/9/20/[live_live1]_20170920103301.flv";
            playUrl = playUrl.replace("127.0.0.1",window.location.hostname);
              var flashvars = get_flash_var(playUrl, "", "", "", "",
             "", "", "", "", "",
             "", "",3);

             playerId = "swfContent";
             var params = {bgcolor : '#FFF',	allowFullScreen : true,	allowScriptAccess : 'always'};//这里定义播放器的其它参数如背景色（跟flashvars中的b不同），是否支持全屏，是否支持交互
             var video = [""];
             CKobject.embed('../ckplayer/ckplayer.swf', playerId, 'swfContent_obj', '100%',	'100%', false, flashvars, video, params);
            //player = embed_live_player(playUrl,"","","",null,"","","","","","",false,true);

        }

        /**
         * 关闭右侧的节目列表
         * @return
         */
        function close_list()
        {
            $("#r_open").show();
            $("#r_close").hide();
            $("#epgList").hide();
            $("#open-list").show();
            $("#open-list").fadeTo(1000,0.3);

            $("#swfContent").css("width","830px");
            CKobject.getObjectById('swfContent_obj').width=830;
        }
        /**
         * 打开右侧的节目列表
         * @return
         */
        function open_list()
        {
            $("#r_close").show();
            $("#r_open").hide();
            $("#epgList").show();
            $("#open-list").hide();

            $("#swfContent").css("width","560px");
            CKobject.getObjectById('swfContent_obj').width=560;
        }


        function add_week_dom(domId,week)
        {
            if(week=="1")
            {
                week = "星期一";
            }
            else if(week=="2")
            {
                week = "星期二";
            }
            else if(week=="3")
            {
                week = "星期三";
            }
            else if(week=="4")
            {
                week = "星期四";
            }
            else if(week=="5")
            {
                week = "星期五";
            }
            else if(week=="6")
            {
                week = "星期六";
            }
            else
            {
                week = "星期日";
            }
            $("#"+domId).text(week);
        }

    </script>

    <script type="text/javascript">
        //change the tr bgcolor
        $(function () {

            $("#epgscroll").find("table tr").each(function (index, element) {

                if ($(this).attr("status") == "1" || $(this).attr("status") == "2") {
                    $(this).css({"cursor": "pointer"});
                }

            });

            $(".edfwi-table tr:even").each(function (index, element) {
                $(this).css("background", "#191919");
            });

            $(".epg-dayofweek").find(".edfwi").each(function () {

                var date = parseInt($(this).attr("date"));
                var curr_date = new Date().getDate();
                if (date == curr_date) {
                    $(this).addClass("dfwhover")
                    $("#edfwitable" + date).fadeIn();
                }
            })


        })
        /**
         * when week table change
         */
        function edfwitableChange(id, obj ,currentDay) {
            $(".edfwi").removeClass("dfwhover")
            $(obj).addClass("dfwhover")
            var startTime = $(obj).attr("starTime");
            var endTime = $(obj).attr("endTime");
            var dom_size = $("#edfwitable_tr"+id).find("tr").size();
            if(dom_size <=0)
            {
                init_back_list(id,startTime,endTime,currentDay);
            }
            $(".edfwi-table").hide();
            $("#edfwitable" + id).fadeIn();
        }

        function showType(type)
        {
            if(type == 1)
            {
                $("#videoList").show();
                $("#tshift").hide();
            }
            else
            {
                $("#tshift").show();
                $("#videoList").hide();
            }
        }


    </script>
    <style>
        .tshiftContent
        {
            border-bottom:solid 1px #222;cursor:pointer;color:#999;font-size:14px;
            line-height:32px;padding-left:10px;background:url("") no-repeat;
            background-position:95% 50%
        }
    </style>
</head>
<body>
<div id="headHtml"></div>

<div id="content">
    <div class="P_Part" id="P_Part07" style="margin:0px auto;width:100%;display:inline-block;-ms-overflow-x:hidden;">
        <div class="resize-element" style="background:#000;height:456px;">
            <div class="m">
                <div id="liveCate" class="resize-element mCustomScrollbar _mCS_1" data-options="{&quot;addHeight&quot;:0}" style="height:456px;">
                    <div class="mCustomScrollBox mCS-light" id="mCSB_1" style="position:relative; height:100%; overflow:hidden; max-width:100%;">
                        <div class="mCSB_container mCS_no_scrollbar" style="position:relative; top:0;" id="liveList">
                            <div class="live-cate live-cate-hover">
                                <a href="javascript:;" >普通频道</a>
                            </div>
                        </div>
                    </div>
                </div><!-- end live cate -->

                    <div id="swfContent" class="swfContent" style="height:456px;width:560px; ">

                </div>

                <div class="open-right_list" >
                    <a id="r_open" style="display: none;" href="javascript:;" onclick=open_list();>点击展开列表</a>
                    <a id="r_close" style="display: block;" href="javascript:;" onclick=close_list();>点击收起列表</a>
                </div>

                <div id="epgList" class="resize-element" style="height:456px;">
                    <div class="epg-t" name="playLive">
                        <div class="epg-t-1" >
                            <span id="live_name"></span>
                            &nbsp;&nbsp;&nbsp;&nbsp;精彩录播
                        </div>
                        <div class="epg-t-2">
                            <script type="text/javascript">
                                var myDate = new Date();
                                var year =  myDate.getFullYear(); //获取完整的年份(4位,1970-????)
                                var month = myDate.getMonth()+1;      //获取当前月份(0-11,0代表1月)
                                var date = myDate.getDate();      //获取当前日(1-31)
                                var week = myDate.getDay();        //获取当前星期X(0-6,0代表星期天)
                                switch(week)
                                {
                                    case 1:
                                        week="星期一"
                                        break;
                                    case 2:
                                        week="星期二"
                                        break;
                                    case 3:
                                        week="星期三"
                                        break;
                                    case 4:
                                        week="星期四"
                                        break;
                                    case 5:
                                        week="星期五"
                                        break;
                                    case 6:
                                        week="星期六"
                                        break;
                                    case 0:
                                        week="星期日"
                                        break;
                                }
                                var time = year+"年"+month+"月"+date+"日"+" "+week;
                                document.write(time);
                            </script>
                        </div>
                    </div>
                    <div class="epgchart resize-element" id="liveEpg"  style="height:430px;" name="playLive">
                        <div class="epgchartcontent resize-element" style="height:430px" id="epgchartcontent">

                            <div id="epgscroll" style="height: 436px; " class="mCustomScrollbar">
                                <div id="liveRight">
                                    <input type="button" id="menuList" value="节目单" onclick="showType(1)"/>
                                    <input type="button" id="tshifList" value="预告单" onclick="showType(2)" style="float: right;"/>
                                </div>
                                <div id="videoList" class="tv-list">
                                    <h2 id="live_title">
                                        live1
                                    </h2>
                                    <h1>
                                        七天内节目回看
                                    </h1>
                                    <div class="subNavBox">

                                        <div class="subNav currentDd currentDt" id="media_1">
                                            <span style="display: inline;">节目回看</span>
                                        </div>
                                        <ul class="navContent" id="media_content_1">

                                        </ul>

                                        <div class="subNav currentDd currentDt" id="media_2">
                                            <span>节目回看</span>
                                        </div>
                                        <ul class="navContent" id="media_content_2">

                                        </ul>

                                        <div class="subNav currentDd currentDt" id="media_3">
                                            <span>节目回看</span>
                                        </div>
                                        <ul class="navContent" id="media_content_3">

                                        </ul>

                                        <div class="subNav currentDd currentDt" id="media_4">
                                            <span>节目回看</span>
                                        </div>
                                        <ul class="navContent" id="media_content_4">

                                        </ul>

                                        <div class="subNav currentDd currentDt" id="media_5">
                                            <span>节目回看</span>
                                        </div>
                                        <ul class="navContent" id="media_content_5">

                                        </ul>

                                        <div class="subNav currentDd currentDt" id="media_6">
                                            <span>节目回看</span>
                                        </div>
                                        <ul class="navContent" id="media_content_6">

                                        </ul>

                                        <div class="subNav currentDd currentDt" id="media_7">
                                            <span>节目回看</span>
                                        </div>
                                        <ul class="navContent" id="media_content_7">

                                        </ul>

                                    </div>
                                </div>
                                <div id="tshift" class="tv-list" style="display: none;">
                                    <h2 id="live_title1">
                                        live1
                                    </h2>
                                    <h1>
                                        节目预告单
                                    </h1>
                                    <div id="tshiftList" class="subNavBox">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="epgchart resize-element" id="liveEpg" name="backLive" style="height:430px;">
                        <div class="epgchartcontent resize-element" style="height:430px" id="epgchartcontent">
                            <div class="epg-dayofweek" id="back_week">

                            </div>

                            <div id="epgscroll" style="height: 376px; " class="mCustomScrollbar">
                                <table id="edfwitable1" class="edfwi-table" style="width:100%;display: none;" border="0" cellpadding="0" cellspacing="0">
                                    <tbody id="edfwitable_tr1">
                                    </tbody>
                                </table>

                                <table id="edfwitable2" class="edfwi-table" style="width: 100%;display: none;" border="0" cellpadding="0" cellspacing="0">
                                    <tbody id="edfwitable_tr2">
                                    </tbody>
                                </table>

                                <table id="edfwitable3" class="edfwi-table" style="width: 100%;display: none;" border="0" cellpadding="0" cellspacing="0">
                                    <tbody id="edfwitable_tr3">
                                    </tbody>
                                </table>

                                <table id="edfwitable4" class="edfwi-table" style="width: 100%;display: none;" border="0" cellpadding="0" cellspacing="0">
                                    <tbody id="edfwitable_tr4">
                                    </tbody>
                                </table>

                                <table id="edfwitable5" class="edfwi-table" style="width: 100%;display: none;" border="0" cellpadding="0" cellspacing="0">
                                    <tbody id="edfwitable_tr5">
                                    </tbody>
                                </table>

                                <table id="edfwitable6" class="edfwi-table" style="width: 100%;display: none;" border="0" cellpadding="0" cellspacing="0">
                                    <tbody id="edfwitable_tr6">
                                    </tbody>
                                </table>

                                <table id="edfwitable7" class="edfwi-table" style="width: 100%;display: none;" border="0" cellpadding="0" cellspacing="0">
                                    <tbody id="edfwitable_tr7">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

            </div><!-- end m -->
        </div>
    </div>
</div>

<div id="bottomHtml"></div>
</body>
</html>
